# ==============================================================================
# ğŸ›°ï¸ SpectraMind V50 â€” DataLoader Persistent Workers (TEST/INFERENCE)
# ------------------------------------------------------------------------------
# Purpose:
#   â€¢ Configure whether DataLoader worker processes persist across test/inference
#     iterations (instead of respawning each epoch).
#   â€¢ Helps when inference spans many batches, but adds overhead if only one pass.
#
# When to Use
#   â€¢ ğŸš« Default: false â€” most inference is one-shot (no benefit).
#   â€¢ âœ… True if:
#       â€“ Running very large test sets with repeated passes (ensembles, MC dropout).
#       â€“ Need stable workers to avoid process re-spawn overhead.
#   â€¢ âš ï¸ Disable in CI/smoke runs for determinism and minimal memory footprint.
#
# Hydra Usage:
#   spectramind predict local/persistent_workers@test_loader=test
# ==============================================================================

persistent_workers: false

notes: |
  Test loaders:
  â€¢ Disabled by default (single-pass inference, no epoch boundaries).
  â€¢ Ensures reproducibility in CI and Kaggle leaderboard submissions.
  â€¢ For advanced use (ensembles, multi-pass calibration), set true to
    avoid worker churn overhead.
  â€¢ Environment-aware best practices:
      â€“ Kaggle/CI leaderboard runs â†’ keep false (safe/deterministic).
      â€“ Local/HPC long inference jobs â†’ may enable true if repeated passes.
  â€¢ Always pair with `pin_memory: true` when GPU is used for maximal throughput.
