# ==============================================================================
# SpectraMind V50 — DVC Plots Registry
# ------------------------------------------------------------------------------
# Purpose:
#   • Central catalog of DVC-rendered plots across training, calibration,
#     spectra diagnostics, and symbolic layers.
#   • All entries reference CSV/TSV/JSONL outputs generated by CLI diagnostics.
#   • Designed for Hydra + DVC workflows; safe for CI and reproducible pipelines.
# ==============================================================================

plots:

  # ───────────────────────────── Training Dynamics ─────────────────────────────
  - Training/Loss:
      path: outputs/metrics/training.tsv
      x: step
      y: [train_loss, val_loss]
      title: "Training vs Validation Loss"
      x_label: "Step"
      y_label: "Loss"

  - Training/Metrics:
      path: outputs/metrics/metrics.tsv
      x: epoch
      y: [val_gll, val_mae]
      title: "Validation Metrics by Epoch"
      x_label: "Epoch"
      y_label: "Score"

  # ───────────────────── Classification-Style Quality Curves ───────────────────
  - ROC:
      path: outputs/diagnostics/roc.csv
      x: fpr
      y: [tpr]
      group: class
      template: simple
      title: "ROC Curve"
      x_label: "False Positive Rate"
      y_label: "True Positive Rate"

  - PR:
      path: outputs/diagnostics/pr.csv
      x: recall
      y: [precision]
      group: class
      title: "Precision–Recall Curve"
      x_label: "Recall"
      y_label: "Precision"

  # ───────────────────────────── Calibration Checks ────────────────────────────
  - Calibration/Reliability:
      path: outputs/calibration/reliability.csv
      x: expected
      y: [observed]
      title: "Reliability Curve"
      x_label: "Expected Probability"
      y_label: "Observed Probability"

  - Calibration/Coverage:
      path: outputs/calibration/coverage.csv
      x: bin
      y: [empirical_coverage, target_coverage]
      title: "Conformal Coverage by Spectral Bin"
      x_label: "Spectral Bin"
      y_label: "Coverage"

  - Calibration/Width:
      path: outputs/calibration/interval_width.csv
      x: bin
      y: [mean_pi_width]
      title: "Prediction Interval Width"
      x_label: "Spectral Bin"
      y_label: "Mean Interval Width"

  # ───────────────────────── Binwise Likelihood & Residuals ────────────────────
  - GLL:
      path: outputs/diagnostics/binwise.csv
      x: bin
      y: [gll]
      title: "Binwise Gaussian Log-Likelihood"
      x_label: "Spectral Bin"
      y_label: "GLL Score"

  - Residuals:
      path: outputs/diagnostics/residuals.csv
      x: bin
      y: [residual_mean, residual_std]
      title: "Residuals by Spectral Bin"
      x_label: "Spectral Bin"
      y_label: "Residuals (μ̂ − y)"

  # ───────────────────────────── FFT / Spectral Domain ─────────────────────────
  - FFT/Power:
      path: outputs/diagnostics/fft.csv
      x: frequency
      y: [power]
      title: "FFT Power Spectrum"
      x_label: "Frequency"
      y_label: "Power"

  - FFT/Autocorrelation:
      path: outputs/diagnostics/fft_autocorr.csv
      x: lag
      y: [autocorr]
      title: "Spectrum Autocorrelation"
      x_label: "Lag (bins)"
      y_label: "Autocorrelation"

  # ───────────────────────────── Smoothness Diagnostics ────────────────────────
  - Smoothness/L2:
      path: outputs/diagnostics/smoothness.csv
      x: bin
      y: [l2_smoothness]
      title: "L2 Smoothness Penalty"
      x_label: "Spectral Bin"
      y_label: "Penalty"

  # ───────────────────────────── Symbolic Diagnostics ──────────────────────────
  - Symbolic/Violations:
      path: outputs/diagnostics/symbolic_violations.csv
      x: bin
      y: [violation_score]
      group: rule
      title: "Symbolic Rule Violations"
      x_label: "Spectral Bin"
      y_label: "Violation Score"

  - Symbolic/CoverageShift:
      path: outputs/diagnostics/symbolic_coverage_shift.csv
      x: bin
      y: [coverage_delta]
      title: "Coverage Shift in Symbolic Regions"
      x_label: "Spectral Bin"
      y_label: "Δ Coverage"

  # ───────────────────────────── Leaderboard Tracking ──────────────────────────
  - Submission/Scores:
      path: outputs/metrics/leaderboard.tsv
      x: run_index
      y: [public_score, private_score]
      title: "Leaderboard Scores per Run"
      x_label: "Run Index"
      y_label: "Score"

  # ───────────────────────────────── Heatmaps (Images) ─────────────────────────
  # These image artifacts are generated by the diagnostics/dashboard codepaths
  # and registered here so DVC can diff them across revisions.
  - Heatmaps/GLL_Binwise:
      path: outputs/diagnostics/heatmaps/gll_binwise.png
      template: image
      title: "GLL Heatmap (Bin × Planet)"

  - Heatmaps/Symbolic_Violations:
      path: outputs/diagnostics/heatmaps/symbolic_violations_heatmap.png
      template: image
      title: "Symbolic Violations Heatmap (Rule × Bin)"

  - Heatmaps/Coverage_By_Bin:
      path: outputs/diagnostics/heatmaps/coverage_by_bin_heatmap.png
      template: image
      title: "Coverage by Bin Heatmap"

  - Heatmaps/COREL_Coverage:
      path: outputs/diagnostics/heatmaps/corel_coverage_heatmap.png
      template: image
      title: "COREL Coverage Heatmap"

# ------------------------------------------------------------------------------
# Notes:
# • Heatmaps are stored as images and diffed by DVC across revisions.
# • This file is CI-safe: all paths resolve within outputs/ and are tracked by DVC.
# • Aligned with Hydra config layering and CLI outputs for reproducibility.
# ==============================================================================